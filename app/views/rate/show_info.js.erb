$(document).ready(function(){
    var attrBox = $('#images-attr');
    var infoBox = $('#images-info');
    var favBox  = $('#fav-box');
    attrBox.empty();

    //**render image info and rate form
    attrBox.html("<%= j render partial: 'rate/info' %>");
    favBox.html("<%= j render partial: 'rate/favourite' %>");

    infoBox.show();
    favBox.show();

    //set link for 'favourite' button
    var imgId =$($('.slick-active')[0]).attr('data-id');
    $('#fav-btn').attr('href', '/favourites?id=' + imgId);

    //**show current rate
    var aveVal =parseFloat($($('.slick-active')[0]).attr('data-value'));
    var valBox = $('#ave-rate');
    if(!!aveVal && aveVal != null) {
        aveVal = aveVal.toFixed(2);
        valBox.html('Average value: ' + aveVal);
    }
    else {
        valBox.html('Nobody has submitted a rate yet');
    }
});